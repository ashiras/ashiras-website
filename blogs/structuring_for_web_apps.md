# Webアプリに対する構造化：品質と変更耐性のためのUI設計論

## 1. はじめに

「Webコンポーネント設計の基本」として、2010年代から既に語られてきたテーマです。たとえば：

- Shadow DOMやCustom Elementsの概念は、2014年頃から注目されていた
- AngularやReactにおける**コンポーネントの分離と再利用**は、設計の常識として定着
- CSSのスコープ問題には、CSS ModulesやBEM、Styled Componentsなどが対応

一方で、

> **「理解されているのに、現場で実装されていない」**

という課題は依然として根強く存在します。特に、UIを設計段階から構造的に捉える意識が不足しており、後からパッチ的にUI要素を追加・修正していく開発が繰り返されています。

本記事では、これらの課題を踏まえつつ、**「構造化UI設計」**という観点から改めて基本に立ち返り、その実践的な導入方法を整理します。

> **「知ってるつもり」で終わらせない、UI構造設計の本質**

という視点で、再発見としての価値を提供できればと思います。

## 2. Webアプリの品質と変更耐性

UIライブラリ（例：Bootstrap、Material UIなど）を導入するだけでは、構造化されたUI設計は成立しません。これらはスタイルとレイアウトの統一には役立ちますが、**再利用性・責務分離・変更耐性といった観点では設計者自身の意識と実装が必要です**。

真にメンテナブルなUIを構築するためには、各UI要素を**責務単位のコンポーネントに分解・構築**し、設計と実装を整合させる必要があります。これは単なる見た目の問題ではなく、**設計思想と実装構造の一致**の問題です。

非構造的なUIは、変更のたびに影響範囲が広がり、テストやデバッグのコストも比例して増大します。一方、構造化されたUIでは、機能追加・仕様変更の影響範囲を限定しやすく、保守性と拡張性に優れた設計が可能になります。

## 3. Web Componentsという発想

MDNの [Web Components](https://developer.mozilla.org/ja/docs/Web/API/Web_components) は、HTMLレベルで再利用可能なコンポーネントを定義するための仕様群です。代表的な要素には以下が含まれます：

- **Shadow DOM**：DOMツリーをコンポーネント内部にカプセル化し、外部からのスタイルやイベント干渉を遮断。スタイルのスコープ化が保証される。
- **Custom Elements**：開発者が独自のHTMLタグ（例：`<my-button>`）を定義可能。UI部品の意味的明確化と再利用を促進。
- **Templates**：静的なHTMLテンプレートを定義し、JavaScriptから必要なタイミングで動的に描画。構造の再利用と遅延レンダリングに活用可能。

これらは、UIを部品単位で分割し、外部との依存を遮断した「自己完結型のUI設計」を実現するための原理として、非常に有効です。

## 4. フレームワークへの応用：Angular/Reactとの橋渡し

Web Componentsの考え方は、AngularやReactのようなフレームワークにおいても同様に有効です。特に次のような点でコンポーネント指向設計と共通しています：

- ラベル表示、入力バリデーション、エラー処理などを含めた共通ルールの集約
- 入力部品（Input、Password、Selectなど）の再利用可能なテンプレート化
- スタイリングとロジックの明確な分離（関心の分離）

### ReactやAngularに求められること

ReactやAngularでは、**コード・テンプレート（HTML）・スタイル（CSS）を分離しつつ、スコープを持った構造として統合する**ことが求められます。

CSSは標準ではスコープの概念を持たないため、以下のような仕組みを活用してスタイルの漏洩を防止する必要があります：

- Angular：`ViewEncapsulation` によるスタイルスコープ制御
- React：CSS Modules、Styled Components、Emotion など

これにより、**外部コンポーネントとのスタイル衝突を防ぎ、堅牢なUI設計が実現可能**になります。

また、すべてのコンポーネントがJavaScriptの振る舞いを持つ必要はありません。たとえば、視覚的な整列・余白・境界線などを扱う**CSS専用のレイアウト部品**は、構造の一貫性と再利用性を高めるのに重要な役割を果たします。

## 5. 具体パターン：UIの構造的設計

### レイヤ

画面全体の構造やコンテナ配置を担う「レイヤ」コンポーネントは、UI全体の構造的な骨格を形成します。これにより、レイアウトの再利用性と適応性が向上します。

### 入力要素

Input、Password、Textareaなどのコンポーネントは、以下のような共通構造を持ちます。

```text
BaseComponent
 |-  InputComponent
 |-  PasswordComponent
 |-  TextareaComponent
```

共通の振る舞いやスタイル（例：ラベル表示、エラーメッセージ、バリデーションルール）を `BaseComponent` に集約し、個別の要素として拡張することで、**保守性・テスト容易性・UI一貫性**のすべてを実現できます。

## 6. UXの視点：デザイン段階から構造を考える

構造的UIはコーディング段階ではなく、**デザイン初期段階から意識されるべきもの**です。デザイン段階でのコンポーネント設計は、後続工程での開発効率や変更耐性に直結します。

- コンポーネント単位でUIパーツを分離・整理する
- ユーザー操作の一貫性や入力支援を考慮した配置を行う
- 旧来の業務アプリ的UI（フォームの塊・テーブル主義）からの脱却
- **レスポンシブ設計**において、各コンポーネントの動的な挙動を明示的に定義する

こうした構造設計の徹底によって、UXは**見た目だけでなく体験の一貫性**として形を持ち始めます。

## 7. おわりに

構造化UIは技術的な選択肢というより、**設計思想そのもの**です。Web Componentsの基礎からフレームワーク実装までを貫く一貫性ある構造設計は、Webアプリの保守性・拡張性・ユーザビリティを高めるための基盤となります。

「コンポーネント化」は単なる再利用のためではなく、「意味のある単位でUIを捉える」ための手段であり、モダン開発において不可欠な設計姿勢です。
